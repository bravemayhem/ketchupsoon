ALTER TABLE events ADD COLUMN IF NOT EXISTS created_by TEXT; DROP POLICY IF EXISTS "Users can view their own events" ON events; DROP POLICY IF EXISTS "Users can insert their own events" ON events; CREATE POLICY "Anyone can view events" ON events FOR SELECT USING (true); CREATE POLICY "Anyone can create events" ON events FOR INSERT WITH CHECK (true); CREATE POLICY "Event creators can update their events" ON events FOR UPDATE USING (auth.uid()::text = created_by) WITH CHECK (auth.uid()::text = created_by); DROP POLICY IF EXISTS "Enable read access for all users" ON event_attendees; DROP POLICY IF EXISTS "Enable insert for event creators" ON event_attendees; DROP POLICY IF EXISTS "Enable update for event creators and attendees" ON event_attendees; DROP POLICY IF EXISTS "Enable delete for event creators" ON event_attendees; CREATE POLICY "Anyone can view attendees" ON event_attendees FOR SELECT USING (true); CREATE POLICY "Anyone can RSVP" ON event_attendees FOR INSERT WITH CHECK (true); CREATE POLICY "Attendees can update their RSVP" ON event_attendees FOR UPDATE USING (auth.uid()::text = attendee_id) WITH CHECK (auth.uid()::text = attendee_id);
